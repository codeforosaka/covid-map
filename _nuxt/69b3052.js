(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{219:function(e,t,o){var content=o(225);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(111).default)("1b7833da",content,!0,{sourceMap:!1})},224:function(e,t,o){"use strict";o(219)},225:function(e,t,o){var n=o(110)(!1);n.push([e.i,'body{margin:0;padding:0}#map{position:absolute;top:0;bottom:0;width:100%}.store{word-break:break-all;font:12px/20px "Helvetica Neue",Arial,Helvetica,sans-serif;background-color:#e7ebb3;padding:3px 10px;margin:3px 0;border-radius:5px}.store_name{font-weight:600;border-bottom:1px solid #000}.store_form{text-align:right}.mapboxgl-popup-content{min-height:50px;max-height:400px;min-width:100px;max-width:500px;overflow-y:scroll;border-radius:10px}#title{font:12px/24px "Helvetica Neue",Arial,Helvetica,sans-serif;font-weight:600;position:absolute;top:10px;left:60px;padding:1px 10px 2px;z-index:1;border-radius:20px;border:3px solid #00008e;max-width:80%;color:#00008e;background-color:#fff}',""]),e.exports=n},228:function(e,t,o){"use strict";o.r(t);o(38),o(37);var n=o(221),r=o.n(n),c=(o(222),{data:function(){return{access_token:"",map:{}}},mounted:function(){this.setUp()},methods:{setUp:function(){this.getLngLat()},getLngLat:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var o=t.coords.longitude,n=t.coords.latitude;e.createMap([o,n])}))},createMap:function(e){r.a.accessToken=this.access_token,this.map=new r.a.Map({container:"map",style:"mapbox://styles/code4osaka/ckm3bbsyd0dqp17tgsq4mpbb1",zoom:15,center:e}),this.getData(this.map,e)},getData:function(map,e){var t=this,o="/api?lat="+e[1]+"&lng="+e[0];this.$axios.$get(o).then((function(o){t.setMap(map,e,o)})).catch((function(e){console.log("response error",e)}))},setMap:function(map,e,data){var t=this,nav=new r.a.NavigationControl;map.addControl(nav,"top-left"),map.addControl(new r.a.GeolocateControl({positionOptions:{enableHighAccuracy:!1},trackUserLocation:!0,showUserLocation:!0})),map.on("load",(function(){map.addSource("places",{type:"geojson",data:data}),map.addLayer({id:"places",type:"symbol",source:"places",layout:{"icon-image":"restaurant","icon-allow-overlap":!0}}),(new r.a.Marker).setLngLat(e).addTo(map),map.on("click","places",(function(e){for(var t=e.features[0].geometry.coordinates.slice(),html=e.features[0].properties.html;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;(new r.a.Popup).setLngLat(t).setHTML(html).addTo(this)})),map.on("mouseenter","places",(function(e){this.getCanvas().style.cursor="pointer"})),map.on("mouseleave","places",(function(e){this.getCanvas().style.cursor=""})),map.on("moveend",(function(){t.resetMap(t.map)}))}))},resetMap:function(map){var e=map.getCenter(),t="/api?lat="+e.lat+"&lng="+e.lng;this.$axios.$get(t).then((function(e){map.removeLayer("places"),map.removeSource("places"),map.addSource("places",{type:"geojson",data:e}),map.addLayer({id:"places",type:"symbol",source:"places",layout:{"icon-image":"restaurant-15","icon-allow-overlap":!0}})})).catch((function(e){console.log("response error",e)}))}}}),l=(o(224),o(46)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{attrs:{id:"map"}}),e._v(" "),o("div",{attrs:{id:"title"}},[e._v("大阪府ゴールドステッカーマップ")])])}],!1,null,null,null);t.default=component.exports}}]);